<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chaud Devant - Showcase</title>
    <style>
        :root {
            /* Fond sombre bleu-vert presque noir */
            --bg-base: #020b0e;
            --text-color: #e0f2f1;
            --card-bg: #091418;
        }

        body, html {
            margin: 0;
            padding: 0;
            background-color: var(--bg-base);
            color: var(--text-color);
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Conteneur principal - Mosaïque type Masonry (Pinterest) */
        #feed {
            column-count: 3;
            column-gap: 20px;
            padding: 40px;
            width: 100%;
            max-width: 1600px;
            margin: 0 auto;
            box-sizing: border-box;
        }

        @media (max-width: 1200px) {
            #feed { column-count: 2; }
        }
        
        @media (max-width: 600px) {
            #feed { column-count: 1; }
        }

        /* Carte vidéo - Juste le bloc image */
        .video-card {
            background: transparent;
            border-radius: 0;
            overflow: hidden;
            box-shadow: none;
            position: relative;
            margin-bottom: 20px; /* Espace vertical entre les éléments */
            break-inside: avoid; /* Empêche de couper une vidéo entre deux colonnes */
            transform: translateZ(0); /* Fix pour certains glitchs de rendu */
            transition: opacity 0.3s ease;
        }

        .video-card:hover {
            opacity: 0.9;
        }

        .video-container {
            position: relative;
            width: 100%;
            background: #000;
            line-height: 0;
        }

        video {
            width: 100%;
            height: auto;
            display: block;
        }

        /* Suppression des éléments demandés */
        .play-overlay, .meta-info {
            display: none;
        }
    </style>
</head>
<body>

<div id="feed">
    <!-- Vidéos ici -->
</div>

<script>
    const feed = document.getElementById('feed');
    let videosData = [];

    function createSlide(videoInfo) {
        const card = document.createElement('div');
        card.className = 'video-card';
        
        // Priorité modifiée pour trouver le format le plus "original" / grand possible
        // Si "16x9" existe, c'est souvent le format ciné. Sinon 1x1.
        let videoUrl = videoInfo.bunny_urls['16x9'];
        if (!videoUrl) videoUrl = videoInfo.bunny_urls['1x1'];
        if (!videoUrl) videoUrl = videoInfo.bunny_urls['9x16'];

        if (!videoUrl) return null;

        card.innerHTML = `
            <div class="video-container paused">
                <video loop playsinline muted preload="metadata">
                    <source src="${videoUrl}" type="video/mp4">
                </video>
            </div>
        `;

        const container = card.querySelector('.video-container');
        const video = card.querySelector('video');
        
        // Click to play/pause
        container.addEventListener('click', () => {
             if (video.paused) {
                 // Stop d'autres vidéos si nécessaire? Pas obligatoire pour une mosaïque
                 // video.muted = false; // Optionnel : activer le son au clic
                 video.play();
                 container.classList.remove('paused');
             } else {
                 video.pause();
                 container.classList.add('paused');
             }
        });
        
        // Mouse enter/leave pour autoplay silencieux (preview)
        card.addEventListener('mouseenter', () => {
            if(video.paused) {
                video.muted = true;
                video.play().catch(()=>{});
                container.classList.remove('paused');
            }
        });

        card.addEventListener('mouseleave', () => {
             if(!video.paused) {
                 video.pause();
                 video.currentTime = 0;
                 container.classList.add('paused');
             }
        });

        return card;
    }

    async function init() {
        try {
            const response = await fetch('showcase.json');
            videosData = await response.json();
            
            // Inverser pour avoir les récents en premier ?? Oui selon le code précédent
            videosData.reverse().forEach(vid => {
                const el = createSlide(vid);
                if (el) feed.appendChild(el);
            });

            // On retire l'IntersectionObserver style "snap scroll"
            // La mosaïque gère l'affichage statique

        } catch (e) {
            console.error(e);
            feed.innerHTML = "<h2 style='text-align:center; margin-top:100px; color:#555;'>Chargement...</h2>";
        }
    }

    // Plus besoin de setupObserver pour l'activation au scroll snap.
    // Les vidéos se jouent au survol.

    init();
</script>


</body>
</html>
